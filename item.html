<!-- Conatins 2 videos and a welcome message -->
<!-- 
Evie Sells
Reg No. 21255921
Email: EASells@uclan.ac.uk 
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <!-- link to the stylesheet -->
    <link rel="stylesheet" href="style.css" type= "text/css">

    <link rel="stylesheet" href="headFootStyle.css" type= "text/css">

    <!-- embed products array into file -->
    <script src="./resources/product-array.js"></script>

    <!-- setting up project -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Evie Sells - UCLan Shop</title>
</head>

<!-- when screen size is changed - function is called -->
<body onresize="changeFillerSize()">
    <header>
        <nav>
            <!-- navigation bar -->
            <div class="topNavBar">
                <!-- adding in logo -->
                <div class="logo">
                    <img src="resources/images/logo.svg" alt="UCLan logo" height="65rem" >
                </div>

                <!-- adding in hamburg menu icon for mobile users -->
                <a class="mobileMenuIcon splitNav" onclick="openHamburgerNav()"><img src="resources/images/other/hamburger-menu-icon.svg" alt="Menu" height="40px"></a>

                <!-- links for page navigation -->
                <li id="navLinks">
                    <a href="index.html" target="_self">Home</a>
                    <a href="products.html" target="_self" >Products</a>
                    <a href="cart.html" id="cartText">Cart</a> <!-- id allows to hide/display cart text -->
                </li>

                <!-- cart menu icon for desktop / tablet -->
                <a href="cart.html" id="cartIcon" class="splitNav"><img src="resources/images/other/shopping-cart-image.svg" alt="Cart" height="40px"></a>
            </div>
        </nav>

    </header>

    <!-- Main -->
    <button id="backToPageBtn" onclick="backToPage()">Back</button>

    <section class="itemPageContainer">
        <h1 id="nameProduct">Name</h1>
        <img id="imageProduct" src='' alt="Product Image" width="40%">
        <h2 id="priceProduct">price</h2>
        <h2 id="colourText">Colour: </h2><h2 id="colourProduct">product colour</h2>
        <p id="descProduct">description of product</p>
        <button class="addToBagBtn" onclick="addToCartFromItem(this)">Add to Cart</button>
    </section>

    <!-- fills out the page -->
    <div id="fillerBox"></div>
    <!-- Footer -->
    <footer>
        <div class="contactInfo">
            <h2 class="footH2">Contact Info:</h2>
            <p class="footP">
                Name: Evie Sells
                <br>
                Email: <a id="emailAddress" href="mailto:EASells@uclan.ac.uk">EASells@uclan.ac.uk</a>
                <br>
                Reg.No: 21255921</p>
        </div>

        <div class="assignmentDetails">
            <h2 class="footH2">Details:</h2>
            <p class="footP">
                CO1707: Web Technologies
                <br>
                Assignment 1: Web Application
            </p>
        </div>

        <div class="FindSU">
            <h2 class="footH2">Find the SU:</h2>
            <p class="footP">University of Central Lancashire Students' Union,
                <br>
                Fylde Road, Preston. PR1 7BY
            </p>
        </div>

        <div class="socialMediaIcons">
            <h2 class="footH2">Stay in touch with the SU!</h2>

            <div class="iconsFooter">
                <a href="https://www.facebook.com/uclanstudentsunion/">
                    <img src='resources/images/social media icons/facebook-social-media-icon.svg' alt="Facebook icon" height="40">
                </a>

                <a href="https://www.tiktok.com/@uclansu">
                    <img src='resources/images/social media icons/tiktok-social-media-icon.svg' alt="TikTok icon" height="40">
                </a>

                <a href="https://www.instagram.com/uclansu/">
                    <img src='resources/images/social media icons/instagram-social-media-icon.svg' alt="Instagram icon" height="40">
                </a>

                <a href="https://x.com/i/flow/login?redirect_after_login=%2FUCLanSU">
                    <img src='resources/images/social media icons/x-social-media-black-icon.svg' alt="X icon" height="40">
                </a>
            </div>
        </div>
    </footer>


<!-- script - JS -->
    <script>
        // Open / Close hamburger navigation function
        function openHamburgerNav()
        {
            // get navLink and set as linksNav
            var linksNav = document.getElementById("navLinks");
            // If nav shown, hide
            if (linksNav.style.display === "inline-table") {
                linksNav.style.display = "none";
            } 
            // If nav hidden, show
            else {
                linksNav.style.display = "inline-table";
            }
        }


        //add to bag
        function addToCartFromItem(elm)
        {
            var ID = sessionStorage.getItem("itemToView");

            var cartList = [];
            cartList = localStorage.getItem("shoppingBag");

            //If there are already items in the cart
            if (cartList != null)
            {
                cartList = cartList + "," + ID;
                localStorage.setItem("shoppingBag", cartList);
            } 
            //if cart is empty - add straight away
            else
            {
                localStorage.setItem("shoppingBag", ID);
            }
            //message to user that item has been added
            alert("Item added to cart");
        }


        // add info about item to page
        function addItemDetails()
        {
            //get id from session storage
            var productID = sessionStorage.getItem("itemToView");

            //find what type the ID is
            var productArray;
            var firstLetter = productID[0];
            if (firstLetter == 't')
            {
                productArray = tshirts;
            }
            else if (firstLetter == 'h')
            {
                productArray = hoodies;
            }
            else 
            {
                productArray = jumpers;
            }

            //find the ID
            var dIndex = productID.indexOf("D");
            var length = productID.length;
            //get the ID by creating a substring
            var idNum = productID.substring(dIndex+1,length);

            //get the details of the id
            var itemDetails = productArray[idNum];

            //populate id's with values
            document.getElementById("nameProduct").innerHTML = itemDetails[0];
            document.getElementById("colourProduct").innerHTML = itemDetails[1];
            document.getElementById("descProduct").innerHTML = itemDetails[2];
            document.getElementById("priceProduct").innerHTML = itemDetails[3];
            document.getElementById("imageProduct").src = "resources/" + itemDetails[4];

            changeFillerSize();
        }
    
        // returns to product page
        function backToPage()
        {
            // go to product page
            window.open("products.html", "_self");
        }

        // changes size of filler box - fills out the page so footer is always
        function changeFillerSize()
        {
            // gets page height
            var pageSize = window.innerHeight;
            console.log("pageSize size = ", pageSize, "px");

            // gets header height
            var headHeight= 0;
            const headerHeight = document.getElementsByClassName("topNavBar");
            for (let i = 0; i < headerHeight.length; i++) {
                let temp = headerHeight[i].offsetHeight;
                headHeight = headHeight + temp;
            }
            console.log("headHeight size = ", headHeight, "px");

            // gets content height
            var contentHeight= 0;
            const itemContainer = document.getElementsByClassName("itemPageContainer");
            for (let i = 0; i < itemContainer.length; i++) {
                let temp = itemContainer[i].offsetHeight;
                contentHeight = contentHeight + temp;
            }
            console.log("contentHeight size = ", contentHeight, "px");

            // gets footer height
            var footerHeight = document.getElementsByTagName("footer")[0].offsetHeight;
            console.log("footer size = ", footerHeight, "px");

            // calcualtes what needs to be subtracted from the page
            var toTake = contentHeight + footerHeight + headHeight;
            console.log("toTake size = ", toTake);

            // calculate the height that filler box needs to be
            var fillerBoxSize = pageSize - toTake;

            // if filler box size is greater than 0, set it to that size
            if (fillerBoxSize > 0){
                console.log("filler box size = ", fillerBoxSize, "px");
                document.getElementById("fillerBox").style.height = fillerBoxSize + "px";
            }
            console.log("");
        }
    
        // main -- calls functions
        addItemDetails();
        changeFillerSize();  //ensures footer is always at the bottom of the page
    </script>
</body>
</html>