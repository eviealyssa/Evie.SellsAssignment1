<!-- contains all products -->
<!-- 
Evie Sells
Reg No. 21255921
Email: EASells@uclan.ac.uk 
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <!-- link to the stylesheets -->
    <link rel="stylesheet" href="style.css" type= "text/css">

    <link rel="stylesheet" href="headFootStyle.css" type= "text/css">

    <!-- embed products array into file -->
    <script src="./resources/product-array.js"></script>

    <!-- setting up project -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Evie Sells - UCLan Shop - Product Page</title>
</head>

<!-- scrolls to heigt stored in session storage on opening -->
<body onload="scrollToHeight()">
    <header>
        <nav>
            <!-- navigation bar -->
            <div class="topNavBar">
                <!-- adding in logo -->
                <div class="logo">
                    <img src="resources/images/logo.svg" alt="UCLan logo" height="65rem" >
                </div>

                <!-- adding in hamburg menu icon for mobile users -->
                <a class="mobileMenuIcon splitNav" onclick="openHamburgerNav()"><img src="resources/images/other/hamburger-menu-icon.svg" alt="Menu" height="40px"></a>

                <!-- links for page navigation -->
                <li id="navLinks">
                    <a href="index.html" target="_self" >Home</a>
                    <a href="products.html" target="_self" class="activePage">Products</a>
                    <a href="cart.html" target="_self"  id="cartText">Cart</a> <!-- id allows to hide/display cart text -->
                </li>

                <!-- cart menu icon for desktop / tablet -->
                <a href="cart.html" id="cartIcon" class="splitNav"><img src="resources/images/other/shopping-cart-image.svg" alt="Cart" height="40px"></a>
            </div>
        </nav>

    </header>

<!-- Main -->
    <div class="breakPoint"></div>

    <!-- scroll to top button -->
     <button id="scrollToTopBtn" onclick="scrollToTop()">To Top</button>

    <h1>Tshirts</h1>
    <!-- product card template & products containers -->
    <div id="tshirtContainer">
        <div class="productCard">
            <img class="productImage" src='' alt="Product Image" width="50%" onclick="viewItem(this)">
            <h1 class="productName">name</h1>
            <h3 class="productPrice">price</h3>
            <p class="productDescription">description</p>
            <a class="readMoreLink" onclick="viewItem(this)">Read more...</a>
            <button class="addToBagBtn" onclick="addToCart(this)">Add to Cart</button>
        </div>
    </div>
 
    <div class="breakPoint"></div>

    <h1>Hoodies</h1>

    <div id="hoodyContainer"></div>

    <div class="breakPoint"></div>

    <h1>Jumpers</h1>

    <div id="jumperContainer"></div>


<!-- Footer -->
    <footer>
        <div class="contactInfo">
            <h2>Contact Info:</h2>
            <p>Name: Evie Sells</p>
            <p>Email: <a id="emailAddress" href="mailto:EASells@uclan.ac.uk">EASells@uclan.ac.uk</a></p>
            <p>Reg.No: 21255921</p>
        </div>

        <div class="assignmentDetails">
            <h2>Details:</h2>
            <p>CO1707: Web Technologies</p>
            <p>Assignment 1: Web Application</p>
        </div>

        <div class="FindSU">
            <h2>Find the SU:</h2>
            <p>University of Central Lancashire Students' Union,</p>
            <p>Fylde Road, Preston. PR1 7BY</p>
        </div>

        <div class="socialMediaIcons">
            <h2>Stay in touch with the SU!</h2>

            <div class="iconsFooter">
                <a href="https://www.facebook.com/uclanstudentsunion/">
                    <img src='resources/images/social media icons/facebook-social-media-icon.svg' alt="Facebook icon" height="40">
                </a>
    
                <a href="https://www.tiktok.com/@uclansu">
                    <img src='resources/images/social media icons/tiktok-social-media-icon.svg' alt="TikTok icon" height="40">
                </a>
    
                <a href="https://www.instagram.com/uclansu/">
                    <img src='resources/images/social media icons/instagram-social-media-icon.svg' alt="Instagram icon" height="40">
                </a>
    
                <a href="https://x.com/i/flow/login?redirect_after_login=%2FUCLanSU">
                    <img src='resources/images/social media icons/x-social-media-black-icon.svg' alt="X icon" height="40">
                </a>
            </div>
        </div>
    </div>
    </footer>


<!-- script - JS -->
    <script>
        // Open / Close hamburger navigation function
        function openHamburgerNav()
        {
            // get navLink and set as linksNav
            var linksNav = document.getElementById("navLinks");
            // If nav shown, hide
            if (linksNav.style.display === "inline-table") {
                linksNav.style.display = "none";
            } 
            // If nav hidden, show
            else {
                linksNav.style.display = "inline-table";
            }
        }

        // sets scroll heigt to 0,0
        function scrollToTop() //https://www.geeksforgeeks.org/scroll-to-the-top-of-the-page-using-javascript-jquery/
        {
            sessionStorage.setItem("scrollHeight", 0);
            window.scrollTo(0,0);
        }


        function addProductsToPage(productType, productArray, productContainer)
        {
            const productList = document.getElementById(productContainer);
            const product = document.querySelector(".productCard");

            for (i=0; i < productArray.length; ++i)
            {
                let productCopy = product.cloneNode(true); //may need to be var instead of let
                productList.appendChild(productCopy);
                var productID = productType + "ID" + i;
                productCopy.id = productID;
                productCopy.querySelector('.productName').innerHTML = productArray[i][0];
                productCopy.querySelector('.productDescription').innerHTML = productArray[i][1];
                productCopy.querySelector('.productPrice').innerHTML = productArray[i][3];
                productCopy.querySelector('.productImage').src = "resources/" + productArray[i][4];
            }
        }

        //populate products page with products
        addProductsToPage('tshirts', tshirts, 'tshirtContainer');

        addProductsToPage('hoodies', hoodies, 'hoodyContainer');

        addProductsToPage('jumpers', jumpers, 'jumperContainer');

        //hide the orginal/template product card in each section
        document.querySelector(".productCard").style.display = "none";

        function viewItem(elm)
        {
            //gets the parent (productCard) of the button
            var parent = elm.parentNode;

            // gets the ID of the selected productCard
            var idProduct = parent.id;

            // sets item in session storage
            sessionStorage.setItem("itemToView", idProduct);

            // get and set scroll height
            sessionStorage.setItem("scrollHeight", this.scrollY);

            //opens index page
            window.open(href="item.html", target="_self");
        }


        function addToCart(elm)
        {
            //gets the parent (productCard) of the button
            var parent = elm.parentNode;
            // gets the ID of the selected productCard
            var idProduct = parent.id;

            //get the data already in the cart
            var cartList = [];
            
            cartList = localStorage.getItem("shoppingBag");

            //If there are already items in the cart - add new item to end
            if (cartList != null)
            {
                cartList = cartList + "," + idProduct;
                localStorage.setItem("shoppingBag", cartList);
            } 
            //if cart is empty - add straight away
            else
            {
                localStorage.setItem("shoppingBag", idProduct);
            }

            //message to user that item has been added
            alert("Item added to cart");
        }


        function scrollToHeight()
        {
            let yValue = sessionStorage.getItem("scrollHeight");
            window.scrollTo(0,yValue);
        }

    </script>
</body>
</html>